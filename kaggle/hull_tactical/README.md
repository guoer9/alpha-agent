# Hull Tactical Market Prediction 比赛分析

## 1. 数据集概览

| 项目 | 训练集 | 测试集 |
|------|--------|--------|
| 样本数 | 9,021 | 动态更新 |
| 特征数 | 94 | 94 |
| 时间范围 | 1988-01-01 ~ 2012-09-11 | 评估API动态提供 |

### ⚠️ 重要提示
- **公开排行榜使用训练集最后180天，分数无意义**
- 真正的测试集在评估API中，会在训练阶段更新
- 测试集有 `lagged_*` 字段可用于推理

---

## 2. 字段说明 (官方)

### 2.1 特征字段

| 前缀 | 数量 | 含义 | 缺失率 |
|------|------|------|--------|
| **D*** | 9 | 虚拟/二进制特征 (Dummy/Binary) | 0.00% |
| **E*** | 20 | 宏观经济特征 (Macro Economic) | 15.23% |
| **I*** | 9 | 利率特征 (Interest Rate) | 11.15% |
| **M*** | 18 | 市场动态/技术特征 (Market Dynamics/Technical) | 25.41% |
| **P*** | 13 | 价格/估值特征 (Price/Valuation) | 12.70% |
| **S*** | 12 | 情绪特征 (Sentiment) | 20.17% |
| **V*** | 13 | 波动率特征 (Volatility) | 19.76% |
| **MOM*** | 0 | 动量特征 (Momentum) | - |

### 2.2 目标变量 (仅训练集)

| 字段 | 说明 | 均值 | 标准差 |
|------|------|------|--------|
| `forward_returns` | 买入S&P500隔天卖出的收益 | 0.000471 | 0.010541 |
| `risk_free_rate` | 联邦基金利率 | 0.000107 | 0.000088 |
| `market_forward_excess_returns` | **预测目标**: 相对预期的超额收益 | 0.000053 | 0.010558 |

**目标变量计算方式**: `forward_returns - 滚动5年均值`，然后用 MAD(4) 进行 Winsorize 截断

### 2.3 测试集特殊字段

| 字段 | 说明 |
|------|------|
| `is_scored` | 该行是否计入评估指标 (训练阶段仅前180行为True) |
| `lagged_forward_returns` | 滞后1天的 forward_returns |
| `lagged_risk_free_rate` | 滞后1天的 risk_free_rate |
| `lagged_market_forward_excess_returns` | 滞后1天的目标变量 |

---

## 3. 特征重要性分析

### Top 10 重要特征 (按相关性)

| 排名 | 特征 | 相关性 | 类别 |
|------|------|--------|------|
| 1 | M4 | 0.067 | 市场动态 |
| 2 | V13 | 0.062 | 波动率 |
| 3 | M1 | 0.046 | 市场动态 |
| 4 | S5 | 0.040 | 情绪 |
| 5 | S2 | 0.038 | 情绪 |
| 6 | D1/D2 | 0.034 | 虚拟变量 |
| 7 | M2 | 0.033 | 市场动态 |
| 8 | V10 | 0.033 | 波动率 |
| 9 | E7 | 0.032 | 宏观经济 |
| 10 | E11 | 0.032 | 宏观经济 |

---

## 4. 数据质量分析

### 4.1 缺失值特点
- **早期数据 (<2000年) 缺失率显著高于后期**
- **M类特征 (市场动态) 缺失率最高 (25.41%)**
- D类特征 (虚拟变量) 无缺失

### 4.2 目标变量特性
- **偏度**: -0.18 (略微左偏)
- **峰度**: 2.25 (接近正态)
- **正收益占比**: 51.7%
- **自相关性**: Lag1=-0.045 (弱负相关)

### 4.3 数据清洗建议
1. **缺失值处理**: 前向填充 + 中位数填充
2. **异常值处理**: 截断超过3倍标准差的值
3. **时间分割**: 建议使用2000年后的数据作为主要训练集

---

## 5. 文件结构

```
kaggle/hull_tactical/
├── data/
│   ├── train.csv              # 训练数据 (9021行)
│   ├── test.csv               # 测试数据 (动态)
│   └── kaggle_evaluation/     # 比赛评估代码
├── analysis_output/           # 数据分析输出
│   ├── missing_values_analysis.png
│   ├── time_series_analysis.png
│   ├── feature_analysis.png
│   └── data_analysis_report.md
├── data_analysis.py           # 数据清洗与可视化
├── dump_bin.py                # Qlib 数据转换
└── README.md                  # 本文档
```

---

## 6. 下一步计划

- [ ] 完成数据清洗流程
- [ ] 特征工程设计
- [ ] 模型训练与验证
- [ ] 提交预测结果
